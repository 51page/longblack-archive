<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LongBlack - Vivid Quote Pulse</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="quote_data.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Nanum+Myeongjo:wght@800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #000; --fg: #fff;
            --vivid-colors: #FF4E00, #00E5FF, #FFEE00, #FF007A, #00FF41, #7000FF;
        }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Montserrat', sans-serif; }

        /* [비비드 슬라이드 레이어] */
        #slide-wrapper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; }
        .slide-row { display: flex; width: 100%; height: 50%; overflow: hidden; }
        .slide-panel { flex: 1; height: 100%; will-change: transform, background-color; }

        /* [중앙 디지털 시계] */
        #clock-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            z-index: 500; pointer-events: none;
        }
        .digital-clock {
            background: #000; color: #fff; padding: 15px 40px;
            font-size: 3rem; font-weight: 900; letter-spacing: 8px;
            border: 4px solid #fff;
        }

        /* [명언(Quote) 노출 레이어] */
        #quote-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            z-index: 1000; pointer-events: none; padding: 0 10%; box-sizing: border-box;
        }
        .quote-text {
            font-family: 'Nanum Myeongjo', serif; font-size: 5vw; font-weight: 800;
            color: #fff; text-align: center; line-height: 1.3; word-break: keep-all;
            text-shadow: 0 0 30px rgba(0,0,0,0.5);
            opacity: 0; mix-blend-mode: difference;
        }

        .brand-logo { position: fixed; top: 40px; left: 40px; color: #fff; font-weight: 900; font-size: 1.5rem; letter-spacing: 5px; z-index: 2000; mix-blend-mode: difference; }
    </style>
</head>
<body>

    <div class="brand-logo">LONGBLACK</div>

    <div id="slide-wrapper">
        <div class="slide-row">
            <div class="slide-panel" id="p1"></div>
            <div class="slide-panel" id="p2"></div>
        </div>
        <div class="slide-row">
            <div class="slide-panel" id="p3"></div>
            <div class="slide-panel" id="p4"></div>
        </div>
    </div>

    <div id="quote-layer">
        <div id="target-quote" class="quote-text"></div>
    </div>

    <div id="clock-layer">
        <div class="digital-clock" id="clock">00:00:00</div>
    </div>

    <script>
        const colors = ['#FF4E00', '#00E5FF', '#FFEE00', '#FF007A', '#00FF41', '#7000FF', '#FFFFFF', '#000000'];
        let secondCounter = 0;

        // quote_data.js 파일의 구조가 다음과 같다고 가정합니다:
        // const quotes = ["문장1", "문장2", ...];
        // 만약 구조가 다르다면 (예: quotes[0].text) 아래 showQuote 함수 내 변수를 수정해야 합니다.

        function init() {
            // 시계 및 슬라이드 시작
            setInterval(() => {
                updateClock();
                triggerVividSlide();
                
                secondCounter++;
                if (secondCounter % 5 === 0) {
                    showQuote();
                }
            }, 1000);
        }

        function updateClock() {
            const now = new Date();
            const timeStr = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
            document.getElementById('clock').innerText = timeStr;
            
            // 시계 반응형 모션
            gsap.fromTo("#clock", { scale: 1.05 }, { scale: 1, duration: 0.2 });
        }

        function triggerVividSlide() {
            const panels = ['#p1', '#p2', '#p3', '#p4'];
            const direction = Math.random() > 0.5 ? 'X' : 'Y';
            
            panels.forEach(id => {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                const moveVal = (Math.random() > 0.5 ? 100 : -100);

                gsap.fromTo(id, 
                    { [direction === 'X' ? 'xPercent' : 'yPercent']: moveVal },
                    { 
                        [direction === 'X' ? 'xPercent' : 'yPercent']: 0, 
                        backgroundColor: randomColor,
                        duration: 0.6, 
                        ease: "expo.out" 
                    }
                );
            });
        }

        function showQuote() {
            // quote_data.js에 정의된 quotes 배열에서 랜덤 추출
            if (typeof quotes === 'undefined' || quotes.length === 0) return;

            const quoteEl = document.getElementById('target-quote');
            const randomIndex = Math.floor(Math.random() * quotes.length);
            
            // 데이터 형식이 객체일 경우(quotes[i].text)와 문자열일 경우를 모두 대응
            const selectedData = quotes[randomIndex];
            const textToDisplay = typeof selectedData === 'string' ? selectedData : selectedData.text;
            
            quoteEl.innerText = textToDisplay;

            const tl = gsap.timeline();
            tl.to(quoteEl, { 
                opacity: 1, 
                y: -20,
                duration: 0.5, 
                ease: "expo.out",
                onStart: () => {
                    // 문장 등장 시 임팩트: 모든 패널을 일시적으로 대비색으로 변경
                    gsap.to(".slide-panel", { backgroundColor: "#000", duration: 0.1 });
                }
            })
            .to(quoteEl, { 
                opacity: 0, 
                y: -50,
                delay: 2.5, // 문장이 머무는 시간
                duration: 0.8, 
                ease: "power4.in" 
            });
        }

        // 스크립트 실행
        window.onload = init;
    </script>
</body>
</html>
