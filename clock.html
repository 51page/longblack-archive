<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LongBlack - Focused Insight</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="quote_data.js"></script> <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Nanum+Myeongjo:wght@800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #000;
            --fg-color: #fff;
            --main-accent: #FF4E00; /* 롱블랙 오렌지 */
        }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg-color); overflow: hidden; font-family: 'Montserrat', sans-serif; }

        /* [단일 컬러 슬라이드 배경] */
        #main-background {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--bg-color); /* 초기 배경 */
            will-change: transform, background-color;
        }

        /* [중앙 디지털 시계] */
        #clock-wrapper {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            z-index: 500;
        }
        .digital-clock {
            background: #000; color: #fff; padding: 15px 40px;
            font-size: 3rem; font-weight: 900; letter-spacing: 8px;
            border: 4px solid var(--fg-color);
            transform: scale(1); will-change: transform;
        }

        /* [명언(Quote) 노출 레이어] */
        #quote-display {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            z-index: 1000; opacity: 0; pointer-events: none;
            padding: 0 10%; box-sizing: border-box;
        }
        .quote-text {
            font-family: 'Nanum Myeongjo', serif; font-size: 5vw; font-weight: 800;
            color: #fff; text-align: center; line-height: 1.3; word-break: keep-all;
            text-shadow: 0 0 30px rgba(0,0,0,0.5);
            transform: scale(0.8); will-change: transform, opacity;
        }

        .brand-logo { position: fixed; top: 40px; left: 40px; color: var(--fg-color); font-weight: 900; font-size: 1.5rem; letter-spacing: 5px; z-index: 2000; mix-blend-mode: difference; }
    </style>
</head>
<body>

    <div class="brand-logo">LONGBLACK</div>

    <div id="main-background"></div>

    <div id="clock-wrapper">
        <div class="digital-clock" id="clock">00:00:00</div>
    </div>

    <div id="quote-display">
        <div id="target-quote" class="quote-text"></div>
    </div>

    <script>
        // 비비드 컬러 팔레트 (다양한 대비색상)
        const vividColors = ['#FF4E00', '#00E5FF', '#FFEE00', '#FF007A', '#00FF41', '#7000FF'];
        let secondCounter = 0;
        let currentQuoteIndex = -1; // 현재 노출된 인덱스 추적

        // quote_data.js 파일에 const quotes = ["문장1", "문장2", ...]; 형태의 배열이 있다고 가정

        function init() {
            // 초기 시계 표시
            updateClock();
            
            // 1초마다 시계, 배경, 5초 주기 이벤트 업데이트
            setInterval(() => {
                updateClock();
                triggerSingleColorSlide();
                
                secondCounter++;
                if (secondCounter % 5 === 0) {
                    showNewQuote();
                }
            }, 1000);
        }

        function updateClock() {
            const now = new Date();
            const timeStr = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
            document.getElementById('clock').innerText = timeStr;
            
            // 시계 박동 애니메이션 (약간의 트위스트 효과 추가)
            gsap.fromTo("#clock", 
                { scale: 1.05, rotationZ: Math.random() * 2 - 1 }, // 약간의 랜덤 회전
                { scale: 1, rotationZ: 0, duration: 0.2, ease: "back.out(1.7)" }
            );
        }

        function triggerSingleColorSlide() {
            const backgroundEl = document.getElementById('main-background');
            const randomColor = vividColors[Math.floor(Math.random() * vividColors.length)];
            const direction = Math.random() > 0.5 ? 'x' : 'y'; // x축 또는 y축 슬라이드
            const startVal = (Math.random() > 0.5 ? 100 : -100); // 왼쪽/오른쪽 또는 위/아래

            // 이전 배경 컬러로 설정된 위치에서 새로운 컬러가 슬라이딩되어 들어옴
            gsap.fromTo(backgroundEl, 
                { 
                    [direction + 'Percent']: startVal, // 시작 위치
                    backgroundColor: randomColor // 새로운 컬러
                },
                { 
                    [direction + 'Percent']: 0, // 원래 위치로 이동
                    duration: 0.8, 
                    ease: "power3.out",
                    onComplete: () => {
                        // 애니메이션 완료 후 배경 컬러를 확정
                        backgroundEl.style.backgroundColor = randomColor;
                        gsap.set(backgroundEl, { xPercent: 0, yPercent: 0 }); // 위치 초기화
                    }
                }
            );
        }

        function showNewQuote() {
            // 문장이 나타날 때는 배경 슬라이드 애니메이션을 멈추고 단색으로 고정
            gsap.killTweensOf("#main-background");
            gsap.to("#main-background", { backgroundColor: "#000", duration: 0.2 }); // 문장 등장 시 배경을 잠시 검정색으로

            gsap.to("#clock-wrapper", { opacity: 0, duration: 0.3, ease: "power2.in" }); // 시계 숨기기

            const quoteEl = document.getElementById('target-quote');
            
            // 이전에 보여준 문장은 다시 보여주지 않도록 인덱스 관리 (전체 문장 수보다 작을 경우)
            if (quotes.length > 1) {
                let newIndex;
                do {
                    newIndex = Math.floor(Math.random() * quotes.length);
                } while (newIndex === currentQuoteIndex);
                currentQuoteIndex = newIndex;
            } else {
                currentQuoteIndex = 0; // 문장이 하나밖에 없으면 계속 그것만 보여줌
            }

            const selectedData = quotes[currentQuoteIndex];
            const textToDisplay = typeof selectedData === 'string' ? selectedData : selectedData.text;
            
            quoteEl.innerText = textToDisplay;

            // 문장 등장 애니메이션
            gsap.fromTo("#quote-display", 
                { opacity: 0, scale: 0.9, y: 30 },
                { 
                    opacity: 1, scale: 1, y: 0, 
                    duration: 0.7, 
                    ease: "back.out(1.7)",
                    onComplete: () => {
                        // 2초 후 문장 사라지고 시계 다시 표시
                        gsap.to("#quote-display", { 
                            opacity: 0, scale: 1.1, y: -30, 
                            delay: 2, 
                            duration: 0.5, 
                            ease: "power2.in",
                            onComplete: () => {
                                gsap.to("#clock-wrapper", { opacity: 1, duration: 0.3, ease: "power2.out" });
                            }
                        });
                    }
                }
            );
        }

        window.onload = init;
    </script>
</body>
</html>
