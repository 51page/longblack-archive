<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LongBlack - Insight Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="quote_data.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --lb-orange: #FF4B22; --lb-black: #000; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--lb-black); color: #fff; font-family: 'Montserrat', sans-serif; overflow: hidden; }
        
        .container { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 0 20px; box-sizing: border-box; }

        /* 화면 단계 제어 */
        .step { position: absolute; width: 100%; max-width: 600px; display: none; flex-direction: column; align-items: center; text-align: center; opacity: 0; }
        .step.active { display: flex; }

        /* 타이포그래피 */
        h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 20px; word-break: keep-all; line-height: 1.3; }
        p { font-size: 1.1rem; opacity: 0.7; margin-bottom: 40px; }

        /* 버튼 디자인 */
        .btn-group { display: flex; flex-direction: column; width: 100%; gap: 15px; }
        .btn { 
            padding: 20px; border: 1px solid rgba(255,255,255,0.3); background: transparent; color: #fff; 
            font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease; border-radius: 4px;
        }
        .btn:hover { background: #fff; color: #000; border-color: #fff; transform: translateY(-3px); }
        .btn-main { background: var(--lb-orange); border: none; font-weight: 700; }

        /* 결과 화면 전용 */
        .result-quote { font-size: 1.8rem; font-weight: 700; line-height: 1.5; color: #fff; margin-bottom: 20px; }
        .result-source { font-size: 1rem; color: var(--lb-orange); margin-bottom: 40px; }
        
        #progress { position: fixed; top: 0; left: 0; height: 4px; background: var(--lb-orange); width: 0%; transition: width 0.3s ease; }
    </style>
</head>
<body>

    <div id="progress"></div>

    <div class="container">
        <div class="step active" id="step-0">
            <h1>오늘 당신에게<br>필요한 감각은?</h1>
            <p>3가지 질문을 통해 지금 이 순간<br>당신을 깨울 문장을 찾아드립니다.</p>
            <button class="btn btn-main" onclick="nextStep(1)">테스트 시작하기</button>
        </div>

        <div class="step" id="step-1">
            <h1>Q1. 요즘 당신을<br>움직이게 하는 힘은?</h1>
            <div class="btn-group">
                <button class="btn" onclick="recordAnswer('inspiration', 2)">새로운 영감과 자극</button>
                <button class="btn" onclick="recordAnswer('essence', 2)">내면의 단단한 중심</button>
            </div>
        </div>

        <div class="step" id="step-2">
            <h1>Q2. 어떤 고민을<br>가장 많이 하나요?</h1>
            <div class="btn-group">
                <button class="btn" onclick="recordAnswer('action', 3)">어떻게 시작할 것인가</button>
                <button class="btn" onclick="recordAnswer('insight', 3)">무엇이 좋은 것인가 (안목)</button>
            </div>
        </div>

        <div class="step" id="step-3">
            <h1>Q3. 성장이란 무엇에<br>가깝다고 생각하시나요?</h1>
            <div class="btn-group">
                <button class="btn" onclick="recordAnswer('accumulation', 'result')">매일의 꾸준한 축적</button>
                <button class="btn" onclick="recordAnswer('happiness', 'result')">좋아하는 일을 즐기는 마음</button>
            </div>
        </div>

        <div class="step" id="step-result">
            <p style="color: var(--lb-orange); font-weight: 700; margin-bottom: 10px;">당신을 위한 한 문장</p>
            <div class="result-quote" id="final-quote"></div>
            <div class="result-source" id="final-source"></div>
            <button class="btn" onclick="location.reload()">다시 테스트하기</button>
        </div>
    </div>

    <script>
        let userChoices = [];

        // 화면 전환 애니메이션
        function nextStep(stepId) {
            const current = document.querySelector('.step.active');
            const next = document.getElementById('step-' + stepId);
            
            // 진행바 업데이트
            const totalSteps = 3;
            if(typeof stepId === 'number') {
                document.getElementById('progress').style.width = (stepId / totalSteps * 100) + '%';
            } else {
                document.getElementById('progress').style.width = '100%';
            }

            gsap.to(current, { opacity: 0, y: -20, duration: 0.4, onComplete: () => {
                current.classList.remove('active');
                next.classList.add('active');
                gsap.fromTo(next, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.4 });
            }});
        }

        // 답변 기록
        function recordAnswer(choice, next) {
            userChoices.push(choice);
            if (next === 'result') {
                calculateResult();
            } else {
                nextStep(next);
            }
        }

        // 결과 도출 로직 (quoteData 기반)
        function calculateResult() {
            // 사용자 선택에 따른 간단한 추천 로직
            // 예: 첫 번째 데이터(조명훈)는 안목(insight), 두 번째(레니)는 실행/시간(action), 세 번째(인재전쟁)는 행복(happiness)
            let resultIndex = 0;

            if (userChoices.includes('insight')) resultIndex = 0;
            else if (userChoices.includes('action')) resultIndex = 1;
            else if (userChoices.includes('happiness')) resultIndex = 2;
            else resultIndex = Math.floor(Math.random() * quoteData.length); // 매칭 안되면 랜덤

            const finalData = quoteData[resultIndex];
            
            document.getElementById('final-quote').innerText = finalData.text;
            document.getElementById('final-source').innerText = finalData.source;

            nextStep('result');
        }
    </script>
</body>
</html>
