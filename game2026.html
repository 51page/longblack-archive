<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LongBlack - Insight Discovery</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="quote_data.js"></script> 
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* 기존 스타일 유지 */
        :root { --bg: #000; --fg: #fff; --accent: #FF4B22; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Montserrat', sans-serif; color: #fff; }
        #main-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 1; }
        #clock-wrapper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10; pointer-events: none; }
        .digital-clock { font-size: clamp(3.5rem, 15vw, 8rem); font-weight: 600; letter-spacing: -0.03em; }
        .logo-img { margin-top: 25px; width: clamp(120px, 22vw, 200px); filter: brightness(0) invert(1); }

        /* 테스트 모달 레이어 */
        #test-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 500; display: none;
            flex-direction: column; align-items: center; justify-content: center;
            padding: 0 10%; box-sizing: border-box;
        }
        .question-text { font-size: 2rem; font-weight: 600; text-align: center; margin-bottom: 40px; word-break: keep-all; line-height: 1.4; }
        .answer-btns { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
        .btn { 
            padding: 15px 40px; border: 1px solid #fff; background: transparent; color: #fff;
            cursor: pointer; font-size: 1.1rem; transition: all 0.3s; border-radius: 50px;
        }
        .btn:hover { background: #fff; color: #000; transform: translateY(-5px); }

        /* 결과 화면 스타일 */
        #result-display { display: none; text-align: center; }
        .result-label { color: var(--accent); font-weight: 600; margin-bottom: 10px; letter-spacing: 2px; }

        /* 테스트 시작 버튼 */
        #test-trigger {
            position: fixed; bottom: 30px; left: 30px; z-index: 1000;
            background: rgba(255,255,255,0.1); backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2); color: #fff;
            padding: 10px 25px; border-radius: 30px; cursor: pointer; font-size: 0.8rem; letter-spacing: 2px;
        }
    </style>
</head>
<body>

    <button id="test-trigger">DISCOVER INSIGHT</button>
    <div id="main-bg"></div>

    <div id="clock-wrapper">
        <div id="clock" class="digital-clock">00:00:00</div>
        <img src="https://framerusercontent.com/images/G3w0MVBdonotmXCUq0mU88kIx4.png?width=1000&height=203" class="logo-img">
    </div>

    <div id="test-overlay">
        <div id="question-container">
            <div class="question-text" id="q-text">질문을 불러오는 중...</div>
            <div class="answer-btns" id="a-container"></div>
        </div>
        
        <div id="result-display">
            <div class="result-label">TODAY'S INSIGHT FOR YOU</div>
            <div class="question-text" id="res-quote"></div>
            <div style="font-size: 1rem; opacity: 0.6; margin-top: 20px;" id="res-source"></div>
            <button class="btn" style="margin-top: 40px;" onclick="location.reload()">BACK TO CLOCK</button>
        </div>
    </div>

    <script>
        // 스무고개 스타일 질문 리스트 (성향 분석용)
        const questions = [
            {
                q: "지금 당신의 마음 상태는 어떤가요?",
                a: [
                    { text: "새로운 자극이 필요해요", type: "inspiration" },
                    { text: "차분한 정리가 필요해요", type: "essence" }
                ]
            },
            {
                q: "성장을 위해 무엇이 더 중요하다고 믿나요?",
                a: [
                    { text: "치열한 기록과 관찰", type: "observation" },
                    { text: "직관적인 감각과 안목", type: "insight" }
                ]
            },
            {
                q: "당신이 일하는 방식은 어느 쪽에 가깝나요?",
                a: [
                    { text: "혼자 깊게 파고드는 타입", type: "individual" },
                    { text: "세상의 흐름을 읽는 타입", type: "trend" }
                ]
            }
        ];

        let currentQ = 0;
        let scores = { inspiration: 0, essence: 0, observation: 0, insight: 0, individual: 0, trend: 0 };

        // 테스트 시작 함수
        document.getElementById('test-trigger').addEventListener('click', () => {
            gsap.to("#test-overlay", { display: 'flex', opacity: 1, duration: 0.5 });
            showQuestion();
        });

        function showQuestion() {
            if (currentQ < questions.length) {
                const q = questions[currentQ];
                document.getElementById('q-text').innerText = q.q;
                const container = document.getElementById('a-container');
                container.innerHTML = '';
                
                q.a.forEach(ans => {
                    const btn = document.createElement('button');
                    btn.className = 'btn';
                    btn.innerText = ans.text;
                    btn.onclick = () => {
                        scores[ans.type]++;
                        currentQ++;
                        showQuestion();
                    };
                    container.appendChild(btn);
                });
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById('question-container').style.display = 'none';
            document.getElementById('result-display').style.display = 'block';

            // 간단한 추천 로직: 점수가 가장 높은 성향에 맞춰 문장 필터링
            // 실제 데이터(quoteData)에서 키워드 매칭 (여기서는 예시로 랜덤 추출)
            const recommendation = quoteData[Math.floor(Math.random() * quoteData.length)];
            
            document.getElementById('res-quote').innerText = recommendation.text;
            document.getElementById('res-source').innerText = "— " + recommendation.source;

            gsap.from("#result-display", { y: 30, opacity: 0, duration: 0.8 });
        }

        // 기존 엔진 코드 (V65 유지)
        // ... (생략된 시계 엔진 부분은 이전 버전과 동일하게 유지하여 배경 모션과 소리가 작동하게 함)
    </script>
</body>
</html>
